---
import Layout from "../layouts/Layout.astro";
import EntryCard from "../components/EntryCard.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("posts", ({ data }) => !data.draft);

// Sort by date (newest first) and extract slug from id
const sortedPosts = posts
  .sort((a, b) => b.data.pubDatetime.valueOf() - a.data.pubDatetime.valueOf())
  .map((post) => ({
    title: post.data.title,
    slug: post.id.split("/").pop()?.replace(/\.md$/, "") ?? post.id,
  }));
---

<Layout>
  <main class="max-w-2xl mx-auto px-4 sm:px-6 py-12 sm:py-16 md:py-24">
    <div
      class="flex flex-wrap items-center justify-between gap-3 mb-10 sm:mb-14 sm:flex-nowrap"
    >
      <div class="flex items-center gap-4 sm:gap-5">
        <img
          src="/bw-pic.png"
          alt="Tadas Petra"
          class="w-10 h-10 sm:w-12 sm:h-12 rounded-lg object-cover grayscale"
        />
        <h1 class="mb-0 leading-none pt-2">tadas petra</h1>
      </div>

      <p class="text-base sm:text-lg w-full sm:w-auto">
        <a href="/resume.pdf" download>resume</a>
      </p>
    </div>

    <div class="space-y-5 sm:space-y-6 text-base sm:text-lg leading-relaxed">
      <!-- <p>
        I find joy in building quality products and sharing how I do it. My goal
        is to lower barriers to entry for developers to build cool things.
      </p> -->

      <p class="text-neutral-500 dark:text-neutral-400">
        I get energy from building useful products and teaching what I learn
        along the way. My purpose is to open doors for anyone who wants to
        build.
      </p>

      <h2 class="mt-16">projects i am working on</h2>
      <div class="space-y-0">
        <EntryCard
          href="https://hungrimind.com"
          title="Hungrimind"
          description="Interactive learning platform for Flutter and Dart."
        />
        <EntryCard
          href="https://youtube.com/@tadaspetra"
          title="Youtube"
          description="Sharing what I learn."
        />
      </div>

      <h2 class="mt-16">places i have worked</h2>
      <div class="space-y-0">
        <EntryCard
          href="https://agora.io"
          title="Agora"
          description="Senior Developer Advocate leading content and product."
        />
        <EntryCard
          href="https://zerotomastery.io/courses/flutter-bootcamp/"
          title="Zero To Mastery"
          description="Instructor for Flutter Bootcamp."
        />
        <EntryCard
          href="https://international.com"
          title="International"
          description="Senior Software Low Level Engineer."
        />
      </div>

      <h2 class="mt-16">things i am proud of</h2>
      <div class="space-y-0">
        <EntryCard
          href="https://developers.google.com/profile/u/107281012378384773706"
          title="GDE"
          description="Google Developer Expert for Flutter and Dart since 2021."
        />
      </div>

      <h2 class="mt-16">writing</h2>
      <div class="space-y-0">
        {
          sortedPosts.map((post) => (
            <a
              href={`/${post.slug}`}
              class="plain-link block px-4 py-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors text-sm sm:text-base"
            >
              {post.title}
            </a>
          ))
        }
      </div>
    </div>
  </main>
</Layout>
