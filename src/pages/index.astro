---
import Layout from "../layouts/Layout.astro";
import EntryCard from "../components/EntryCard.astro";
import { PreviousThings } from "../components/PreviousThings";
import { getCollection } from "astro:content";

const essays = await getCollection("essays", ({ data }) => !data.draft);

const sortedEssays = essays
  .sort((a, b) => b.data.pubDatetime.valueOf() - a.data.pubDatetime.valueOf())
  .map((post) => ({
    title: post.data.title,
    // how-computers-work/index.mdx -> how-computers-work
    slug: post.id.split("/")[0],
  }));

const previousItems = [
  {
    href: "https://youtube.com/@tadaspetra",
    title: "Youtube",
    description: "Sharing what I learn.",
    logo: "/logos/youtube.svg",
    logoClass: "h-4 pb-1",
  },
  {
    href: "https://agora.io",
    title: "Agora",
    description: "Senior Developer Advocate leading content and product.",
    logo: "/logos/agora.svg",
    logoClass: "h-4",
  },
  {
    href: "https://zerotomastery.io/courses/flutter-bootcamp/",
    title: "Zero To Mastery",
    description: "Instructor for Flutter Bootcamp.",
    logo: "/logos/ztm.svg",
    logoClass: "h-3",
    logoText: "Zero To Mastery",
  },
  {
    href: "https://international.com",
    title: "International",
    description: "Senior Software Low Level Engineer.",
    logo: "/logos/international.png",
    logoClass: "h-4 pb-1",
  },
  {
    href: "https://developers.google.com/profile/u/107281012378384773706",
    title: "GDE",
    description: "Google Developer Expert for Flutter and Dart since 2021.",
    logo: "/logos/google.svg",
    logoClass: "h-4",
  },
];
---

<Layout
  title="Tadas Petra"
  description="I get energy from building useful products and teaching what I learn along the way."
  ogImage="/og.png"
>
  <main class="max-w-2xl mx-auto px-4 sm:px-6 py-12 sm:py-16 md:py-24">
    <div
      class="flex flex-wrap items-center justify-between gap-3 mb-10 sm:mb-14 sm:flex-nowrap"
    >
      <div class="flex items-center gap-4 sm:gap-5">
        <img
          src="/profile-transparent.png"
          alt="Tadas Petra"
          class="w-32 h-32 sm:w-40 sm:h-40 rounded-lg object-cover"
        />
        <div>
          <h1 class="mb-0 leading-none pt-2">tadas petra</h1>
          <p
            class="text-sm text-neutral-400 dark:text-neutral-500 -mt-1 flex items-center gap-1"
          >
            tah-dahs pet-rah
          </p>
        </div>
      </div>
    </div>

    <div class="space-y-5 sm:space-y-6 text-base sm:text-lg leading-relaxed">
      <!-- <p>
        I find joy in building quality products and sharing how I do it. My goal
        is to lower barriers to entry for developers to build cool things.
      </p> -->

      <p class="text-neutral-500 dark:text-neutral-400">
        I find joy in learning complex topics and explaining them in a way that
        creates clarity and awe. Here's what I'm currently working on.
      </p>

      <div class="space-y-0 mt-10 pb-0 mb-0">
        <EntryCard
          href="https://elevenlabs.io"
          title="ElevenLabs"
          description="Developer Relations Engineer"
          logo="/logos/elevenlabs.svg"
          class="h-4 -ml-0.5 pb-1"
        />
        <EntryCard
          href="https://hungrimind.com"
          title="Hungrimind"
          description="Founder"
          logo="/logos/hungrimind.png"
          class="h-5"
        />
      </div>

      <PreviousThings items={previousItems} client:load />

      <h2 class="mt-16">essays</h2>
      <div class="space-y-0">
        {
          sortedEssays.map((post) => (
            <a
              href={`/${post.slug}`}
              class="plain-link block px-4 py-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors text-sm sm:text-base"
            >
              {post.title}
            </a>
          ))
        }
      </div>
    </div>
  </main>

  <script>
    const playBtn = document.getElementById("play-pronunciation");
    const audio = document.getElementById("name-audio") as HTMLAudioElement;

    playBtn?.addEventListener("click", () => {
      audio.currentTime = 0;
      audio.play();
    });
  </script>
</Layout>
